// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	tfTypes "github.com/planetscale/terraform-provider-planetscale/internal/provider/types"
	"github.com/planetscale/terraform-provider-planetscale/internal/sdk/models/operations"
)

func (r *PostgresBranchRolesDataSourceModel) RefreshFromOperationsListRolesResponseBody(ctx context.Context, resp *operations.ListRolesResponseBody) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		if r.Data == nil {
			r.Data = []tfTypes.ListRolesData{}
		}

		for _, dataItem := range resp.Data {
			var data tfTypes.ListRolesData

			data.AccessHostURL = types.StringValue(dataItem.AccessHostURL)
			data.Actor = &tfTypes.ListRolesActor{}
			data.Actor.AvatarURL = types.StringValue(dataItem.Actor.AvatarURL)
			data.Actor.DisplayName = types.StringValue(dataItem.Actor.DisplayName)
			data.Actor.ID = types.StringValue(dataItem.Actor.ID)
			data.Branch = &tfTypes.Branch{}
			data.Branch.CreatedAt = types.StringValue(dataItem.Branch.CreatedAt)
			data.Branch.DeletedAt = types.StringValue(dataItem.Branch.DeletedAt)
			data.Branch.ID = types.StringValue(dataItem.Branch.ID)
			data.Branch.Name = types.StringValue(dataItem.Branch.Name)
			data.Branch.UpdatedAt = types.StringValue(dataItem.Branch.UpdatedAt)
			data.CreatedAt = types.StringValue(dataItem.CreatedAt)
			data.DatabaseName = types.StringValue(dataItem.DatabaseName)
			data.Default = types.BoolValue(dataItem.Default)
			data.DeletedAt = types.StringValue(dataItem.DeletedAt)
			data.DisabledAt = types.StringValue(dataItem.DisabledAt)
			data.DropFailed = types.StringValue(dataItem.DropFailed)
			data.DroppedAt = types.StringValue(dataItem.DroppedAt)
			data.Expired = types.BoolValue(dataItem.Expired)
			data.ExpiresAt = types.StringValue(dataItem.ExpiresAt)
			data.ID = types.StringValue(dataItem.ID)
			if data.InheritedRoles == nil {
				data.InheritedRoles = make([]types.String, 0, len(dataItem.InheritedRoles))
			}
			for _, v := range dataItem.InheritedRoles {
				data.InheritedRoles = append(data.InheritedRoles, types.StringValue(string(v)))
			}
			data.Name = types.StringValue(dataItem.Name)
			data.Password = types.StringValue(dataItem.Password)
			data.PrivateAccessHostURL = types.StringValue(dataItem.PrivateAccessHostURL)
			data.PrivateConnectionServiceName = types.StringValue(dataItem.PrivateConnectionServiceName)
			data.QuerySafetySettings = &tfTypes.ListRolesQuerySafetySettings{}
			data.QuerySafetySettings.RequireWhereOnDelete = types.StringValue(string(dataItem.QuerySafetySettings.RequireWhereOnDelete))
			data.QuerySafetySettings.RequireWhereOnUpdate = types.StringValue(string(dataItem.QuerySafetySettings.RequireWhereOnUpdate))
			data.TTL = types.Int64Value(dataItem.TTL)
			data.UpdatedAt = types.StringValue(dataItem.UpdatedAt)
			data.Username = types.StringValue(dataItem.Username)

			r.Data = append(r.Data, data)
		}
	}

	return diags
}

func (r *PostgresBranchRolesDataSourceModel) ToOperationsListRolesRequest(ctx context.Context) (*operations.ListRolesRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var organization string
	organization = r.Organization.ValueString()

	var database string
	database = r.Database.ValueString()

	var branch string
	branch = r.Branch.ValueString()

	out := operations.ListRolesRequest{
		Organization: organization,
		Database:     database,
		Branch:       branch,
	}

	return &out, diags
}
