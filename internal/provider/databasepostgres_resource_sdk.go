// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	tfTypes "github.com/planetscale/terraform-provider-planetscale/internal/provider/types"
	"github.com/planetscale/terraform-provider-planetscale/internal/sdk/models/operations"
)

func (r *DatabasePostgresResourceModel) RefreshFromOperationsCreatePostgresDatabaseResponseBody(ctx context.Context, resp *operations.CreatePostgresDatabaseResponseBody) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.AtBackupRestoreBranchesLimit = types.BoolPointerValue(resp.AtBackupRestoreBranchesLimit)
		r.AtDevelopmentBranchUsageLimit = types.BoolPointerValue(resp.AtDevelopmentBranchUsageLimit)
		r.BranchesURL = types.StringPointerValue(resp.BranchesURL)
		r.CreatedAt = types.StringPointerValue(resp.CreatedAt)
		if resp.DataImport == nil {
			r.DataImport = nil
		} else {
			r.DataImport = &tfTypes.GetPostgresDatabaseDataImport{}
			if resp.DataImport.DataSource == nil {
				r.DataImport.DataSource = nil
			} else {
				r.DataImport.DataSource = &tfTypes.GetPostgresDatabaseDataSource{}
				r.DataImport.DataSource.Database = types.StringPointerValue(resp.DataImport.DataSource.Database)
				r.DataImport.DataSource.Hostname = types.StringPointerValue(resp.DataImport.DataSource.Hostname)
				r.DataImport.DataSource.Port = types.Float64PointerValue(resp.DataImport.DataSource.Port)
			}
			r.DataImport.FinishedAt = types.StringPointerValue(resp.DataImport.FinishedAt)
			r.DataImport.ImportCheckErrors = types.StringPointerValue(resp.DataImport.ImportCheckErrors)
			r.DataImport.StartedAt = types.StringPointerValue(resp.DataImport.StartedAt)
			r.DataImport.State = types.StringPointerValue(resp.DataImport.State)
		}
		r.HTMLURL = types.StringPointerValue(resp.HTMLURL)
		r.ID = types.StringPointerValue(resp.ID)
		r.InsightsEnabled = types.BoolPointerValue(resp.InsightsEnabled)
		r.InsightsRawQueries = types.BoolPointerValue(resp.InsightsRawQueries)
		r.MultipleAdminsRequiredForDeletion = types.BoolPointerValue(resp.MultipleAdminsRequiredForDeletion)
		r.Name = types.StringPointerValue(resp.Name)
		r.Plan = types.StringPointerValue(resp.Plan)
		r.ProductionBranchWebConsole = types.BoolPointerValue(resp.ProductionBranchWebConsole)
		r.Ready = types.BoolPointerValue(resp.Ready)
		if resp.RegionData == nil {
			r.RegionData = nil
		} else {
			r.RegionData = &tfTypes.GetPostgresDatabaseRegionData{}
			r.RegionData.CurrentDefault = types.BoolPointerValue(resp.RegionData.CurrentDefault)
			r.RegionData.DisplayName = types.StringPointerValue(resp.RegionData.DisplayName)
			r.RegionData.Enabled = types.BoolPointerValue(resp.RegionData.Enabled)
			r.RegionData.ID = types.StringPointerValue(resp.RegionData.ID)
			r.RegionData.Location = types.StringPointerValue(resp.RegionData.Location)
			r.RegionData.Provider = types.StringPointerValue(resp.RegionData.Provider)
			r.RegionData.PublicIPAddresses = make([]types.String, 0, len(resp.RegionData.PublicIPAddresses))
			for _, v := range resp.RegionData.PublicIPAddresses {
				r.RegionData.PublicIPAddresses = append(r.RegionData.PublicIPAddresses, types.StringValue(v))
			}
			r.RegionData.Slug = types.StringPointerValue(resp.RegionData.Slug)
		}
		r.RequireApprovalForDeploy = types.BoolPointerValue(resp.RequireApprovalForDeploy)
		r.ResizeQueued = types.BoolPointerValue(resp.ResizeQueued)
		r.Resizing = types.BoolPointerValue(resp.Resizing)
		r.RestrictBranchRegion = types.BoolPointerValue(resp.RestrictBranchRegion)
		r.SchemaLastUpdatedAt = types.StringPointerValue(resp.SchemaLastUpdatedAt)
		if resp.State != nil {
			r.State = types.StringValue(string(*resp.State))
		} else {
			r.State = types.StringNull()
		}
		r.UpdatedAt = types.StringPointerValue(resp.UpdatedAt)
		r.URL = types.StringPointerValue(resp.URL)
	}

	return diags
}

func (r *DatabasePostgresResourceModel) RefreshFromOperationsGetPostgresDatabaseResponseBody(ctx context.Context, resp *operations.GetPostgresDatabaseResponseBody) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.AtBackupRestoreBranchesLimit = types.BoolPointerValue(resp.AtBackupRestoreBranchesLimit)
		r.AtDevelopmentBranchUsageLimit = types.BoolPointerValue(resp.AtDevelopmentBranchUsageLimit)
		r.BranchesURL = types.StringPointerValue(resp.BranchesURL)
		r.CreatedAt = types.StringPointerValue(resp.CreatedAt)
		if resp.DataImport == nil {
			r.DataImport = nil
		} else {
			r.DataImport = &tfTypes.GetPostgresDatabaseDataImport{}
			if resp.DataImport.DataSource == nil {
				r.DataImport.DataSource = nil
			} else {
				r.DataImport.DataSource = &tfTypes.GetPostgresDatabaseDataSource{}
				r.DataImport.DataSource.Database = types.StringPointerValue(resp.DataImport.DataSource.Database)
				r.DataImport.DataSource.Hostname = types.StringPointerValue(resp.DataImport.DataSource.Hostname)
				r.DataImport.DataSource.Port = types.Float64PointerValue(resp.DataImport.DataSource.Port)
			}
			r.DataImport.FinishedAt = types.StringPointerValue(resp.DataImport.FinishedAt)
			r.DataImport.ImportCheckErrors = types.StringPointerValue(resp.DataImport.ImportCheckErrors)
			r.DataImport.StartedAt = types.StringPointerValue(resp.DataImport.StartedAt)
			r.DataImport.State = types.StringPointerValue(resp.DataImport.State)
		}
		r.HTMLURL = types.StringPointerValue(resp.HTMLURL)
		r.ID = types.StringPointerValue(resp.ID)
		r.InsightsEnabled = types.BoolPointerValue(resp.InsightsEnabled)
		r.InsightsRawQueries = types.BoolPointerValue(resp.InsightsRawQueries)
		r.MultipleAdminsRequiredForDeletion = types.BoolPointerValue(resp.MultipleAdminsRequiredForDeletion)
		r.Name = types.StringPointerValue(resp.Name)
		r.Plan = types.StringPointerValue(resp.Plan)
		r.ProductionBranchWebConsole = types.BoolPointerValue(resp.ProductionBranchWebConsole)
		r.Ready = types.BoolPointerValue(resp.Ready)
		if resp.RegionData == nil {
			r.RegionData = nil
		} else {
			r.RegionData = &tfTypes.GetPostgresDatabaseRegionData{}
			r.RegionData.CurrentDefault = types.BoolPointerValue(resp.RegionData.CurrentDefault)
			r.RegionData.DisplayName = types.StringPointerValue(resp.RegionData.DisplayName)
			r.RegionData.Enabled = types.BoolPointerValue(resp.RegionData.Enabled)
			r.RegionData.ID = types.StringPointerValue(resp.RegionData.ID)
			r.RegionData.Location = types.StringPointerValue(resp.RegionData.Location)
			r.RegionData.Provider = types.StringPointerValue(resp.RegionData.Provider)
			r.RegionData.PublicIPAddresses = make([]types.String, 0, len(resp.RegionData.PublicIPAddresses))
			for _, v := range resp.RegionData.PublicIPAddresses {
				r.RegionData.PublicIPAddresses = append(r.RegionData.PublicIPAddresses, types.StringValue(v))
			}
			r.RegionData.Slug = types.StringPointerValue(resp.RegionData.Slug)
		}
		r.RequireApprovalForDeploy = types.BoolPointerValue(resp.RequireApprovalForDeploy)
		r.ResizeQueued = types.BoolPointerValue(resp.ResizeQueued)
		r.Resizing = types.BoolPointerValue(resp.Resizing)
		r.RestrictBranchRegion = types.BoolPointerValue(resp.RestrictBranchRegion)
		r.SchemaLastUpdatedAt = types.StringPointerValue(resp.SchemaLastUpdatedAt)
		if resp.State != nil {
			r.State = types.StringValue(string(*resp.State))
		} else {
			r.State = types.StringNull()
		}
		r.UpdatedAt = types.StringPointerValue(resp.UpdatedAt)
		r.URL = types.StringPointerValue(resp.URL)
	}

	return diags
}

func (r *DatabasePostgresResourceModel) RefreshFromOperationsUpdatePostgresDatabaseResponseBody(ctx context.Context, resp *operations.UpdatePostgresDatabaseResponseBody) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.ID = types.StringPointerValue(resp.ID)
	}

	return diags
}

func (r *DatabasePostgresResourceModel) ToOperationsCreatePostgresDatabaseRequest(ctx context.Context) (*operations.CreatePostgresDatabaseRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var organization string
	organization = r.Organization.ValueString()

	body, bodyDiags := r.ToOperationsCreatePostgresDatabaseRequestBody(ctx)
	diags.Append(bodyDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.CreatePostgresDatabaseRequest{
		Organization: organization,
		Body:         body,
	}

	return &out, diags
}

func (r *DatabasePostgresResourceModel) ToOperationsCreatePostgresDatabaseRequestBody(ctx context.Context) (*operations.CreatePostgresDatabaseRequestBody, diag.Diagnostics) {
	var diags diag.Diagnostics

	var name string
	name = r.Name.ValueString()

	region := new(string)
	if !r.Region.IsUnknown() && !r.Region.IsNull() {
		*region = r.Region.ValueString()
	} else {
		region = nil
	}
	var clusterSize string
	clusterSize = r.ClusterSize.ValueString()

	replicas := new(float64)
	if !r.Replicas.IsUnknown() && !r.Replicas.IsNull() {
		*replicas = r.Replicas.ValueFloat64()
	} else {
		replicas = nil
	}
	majorVersion := new(string)
	if !r.MajorVersion.IsUnknown() && !r.MajorVersion.IsNull() {
		*majorVersion = r.MajorVersion.ValueString()
	} else {
		majorVersion = nil
	}
	out := operations.CreatePostgresDatabaseRequestBody{
		Name:         name,
		Region:       region,
		ClusterSize:  clusterSize,
		Replicas:     replicas,
		MajorVersion: majorVersion,
	}

	return &out, diags
}

func (r *DatabasePostgresResourceModel) ToOperationsDeletePostgresDatabaseRequest(ctx context.Context) (*operations.DeletePostgresDatabaseRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var organization string
	organization = r.Organization.ValueString()

	var database string
	database = r.Database.ValueString()

	out := operations.DeletePostgresDatabaseRequest{
		Organization: organization,
		Database:     database,
	}

	return &out, diags
}

func (r *DatabasePostgresResourceModel) ToOperationsGetPostgresDatabaseRequest(ctx context.Context) (*operations.GetPostgresDatabaseRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var organization string
	organization = r.Organization.ValueString()

	var database string
	database = r.Database.ValueString()

	out := operations.GetPostgresDatabaseRequest{
		Organization: organization,
		Database:     database,
	}

	return &out, diags
}

func (r *DatabasePostgresResourceModel) ToOperationsUpdatePostgresDatabaseRequest(ctx context.Context) (*operations.UpdatePostgresDatabaseRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var organization string
	organization = r.Organization.ValueString()

	var database string
	database = r.Database.ValueString()

	body, bodyDiags := r.ToOperationsUpdatePostgresDatabaseRequestBody(ctx)
	diags.Append(bodyDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.UpdatePostgresDatabaseRequest{
		Organization: organization,
		Database:     database,
		Body:         body,
	}

	return &out, diags
}

func (r *DatabasePostgresResourceModel) ToOperationsUpdatePostgresDatabaseRequestBody(ctx context.Context) (*operations.UpdatePostgresDatabaseRequestBody, diag.Diagnostics) {
	var diags diag.Diagnostics

	name := new(string)
	if !r.Name.IsUnknown() && !r.Name.IsNull() {
		*name = r.Name.ValueString()
	} else {
		name = nil
	}
	requireApprovalForDeploy := new(bool)
	if !r.RequireApprovalForDeploy.IsUnknown() && !r.RequireApprovalForDeploy.IsNull() {
		*requireApprovalForDeploy = r.RequireApprovalForDeploy.ValueBool()
	} else {
		requireApprovalForDeploy = nil
	}
	restrictBranchRegion := new(bool)
	if !r.RestrictBranchRegion.IsUnknown() && !r.RestrictBranchRegion.IsNull() {
		*restrictBranchRegion = r.RestrictBranchRegion.ValueBool()
	} else {
		restrictBranchRegion = nil
	}
	insightsRawQueries := new(bool)
	if !r.InsightsRawQueries.IsUnknown() && !r.InsightsRawQueries.IsNull() {
		*insightsRawQueries = r.InsightsRawQueries.ValueBool()
	} else {
		insightsRawQueries = nil
	}
	productionBranchWebConsole := new(bool)
	if !r.ProductionBranchWebConsole.IsUnknown() && !r.ProductionBranchWebConsole.IsNull() {
		*productionBranchWebConsole = r.ProductionBranchWebConsole.ValueBool()
	} else {
		productionBranchWebConsole = nil
	}
	out := operations.UpdatePostgresDatabaseRequestBody{
		Name:                       name,
		RequireApprovalForDeploy:   requireApprovalForDeploy,
		RestrictBranchRegion:       restrictBranchRegion,
		InsightsRawQueries:         insightsRawQueries,
		ProductionBranchWebConsole: productionBranchWebConsole,
	}

	return &out, diags
}
