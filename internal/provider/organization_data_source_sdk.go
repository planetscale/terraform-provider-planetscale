// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"encoding/json"
	"github.com/hashicorp/terraform-plugin-framework-jsontypes/jsontypes"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/planetscale/terraform-provider-planetscale/internal/sdk/models/operations"
)

func (r *OrganizationDataSourceModel) RefreshFromOperationsGetOrganizationResponseBody(ctx context.Context, resp *operations.GetOrganizationResponseBody) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.BillingEmail = types.StringValue(resp.BillingEmail)
		r.CreatedAt = types.StringValue(resp.CreatedAt)
		r.DatabaseCount = types.Int64Value(resp.DatabaseCount)
		if len(resp.Features) > 0 {
			r.Features = make(map[string]jsontypes.Normalized, len(resp.Features))
			for key, value := range resp.Features {
				result, _ := json.Marshal(value)
				r.Features[key] = jsontypes.NewNormalizedValue(string(result))
			}
		}
		r.HasCard = types.BoolValue(resp.HasCard)
		r.HasPastDueInvoices = types.BoolValue(resp.HasPastDueInvoices)
		r.ID = types.StringValue(resp.ID)
		r.IdpManagedRoles = types.BoolValue(resp.IdpManagedRoles)
		r.InvoiceBudgetAmount = types.StringValue(resp.InvoiceBudgetAmount)
		r.KeyspaceShardLimit = types.Int64Value(resp.KeyspaceShardLimit)
		r.ManagedTenancy = types.BoolValue(resp.ManagedTenancy)
		r.Name = types.StringValue(resp.Name)
		r.PaymentInfoRequired = types.BoolValue(resp.PaymentInfoRequired)
		r.Plan = types.StringValue(resp.Plan)
		r.SingleTenancy = types.BoolValue(resp.SingleTenancy)
		r.Sso = types.BoolValue(resp.Sso)
		r.SsoDirectory = types.BoolValue(resp.SsoDirectory)
		r.SsoPortalURL = types.StringValue(resp.SsoPortalURL)
		r.UpdatedAt = types.StringValue(resp.UpdatedAt)
		r.ValidBillingInfo = types.BoolValue(resp.ValidBillingInfo)
	}

	return diags
}

func (r *OrganizationDataSourceModel) ToOperationsGetOrganizationRequest(ctx context.Context) (*operations.GetOrganizationRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var organization string
	organization = r.Organization.ValueString()

	out := operations.GetOrganizationRequest{
		Organization: organization,
	}

	return &out, diags
}
