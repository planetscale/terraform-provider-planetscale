overlay: 1.1.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Terraform generation overlay for planetscale_database_vitess managed and data resources.
  version: 0.0.1
actions:
  - target: $.paths
    update:
      /organizations/{organization}/databases#vitess: {}

  - target: $.paths['/organizations/{organization}/databases#vitess']
    description: Copy databases path as base
    copy: $.paths['/organizations/{organization}/databases']

  - target: $.paths
    update:
      /organizations/{organization}/databases/{database}#vitess: {}

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess']
    description: Copy database path as base
    copy: $.paths['/organizations/{organization}/databases/{database}']

  - target: $.paths['/organizations/{organization}/databases#vitess'].get
    remove: true

  - target: $.paths['/organizations/{organization}/databases#vitess'].post
    update:
      operationId: create_vitess_database
      summary: Create a Vitess database
      x-speakeasy-entity-description: Manage a PlanetScale Vitess database.

  - target: $.paths['/organizations/{organization}/databases#vitess'].post.requestBody.content['application/json'].schema.properties
    update:
      kind:
        type: string
        const: mysql
        default: mysql
        description: The kind of database (always mysql for Vitess databases).
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.requestBody.content['application/json'].schema.properties.major_version
    remove: true

  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.kind
    update:
      const: mysql
      description: The kind of database
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.kind.enum
    remove: true

  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.region
    update:
      x-speakeasy-name-override: region_data
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.branches_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.open_schema_recommendations_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.development_branches_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.production_branches_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.issues_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.default_branch_shard_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.default_branch_read_only_regions_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.default_branch_table_count
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.paths['/organizations/{organization}/databases#vitess'].post.responses['201'].content['application/json'].schema.properties.default_branch
    update:
      x-speakeasy-terraform-ignore: true

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].get
    update:
      operationId: get_vitess_database
      summary: Get a Vitess database
      x-speakeasy-entity-operation:
        - DatabaseVitess#read
      x-speakeasy-entity-description: Returns information about a PlanetScale Vitess database.
      x-speakeasy-polling:
        - name: WaitForReady
          limitCount: 300
          successCriteria:
            - condition: $statusCode == 200
            - condition: $response.body#/state == "ready"

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].get.parameters[?@.name == 'database']
    update:
      x-speakeasy-match: id

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].get.responses['200'].content['application/json'].schema.properties.kind
    update:
      const: mysql
      description: The kind of database
  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].get.responses['200'].content['application/json'].schema.properties.kind.enum
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].get.responses['200'].content['application/json'].schema.properties.region
    update:
      x-speakeasy-name-override: region_data

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].patch
    update:
      operationId: update_vitess_database
      summary: Update Vitess database settings

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].patch.parameters[?@.name == 'database']
    update:
      x-speakeasy-match: id

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].patch.requestBody.content['application/json'].schema.properties.default_branch
    update:
      x-speakeasy-terraform-ignore: true

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].delete
    update:
      operationId: delete_vitess_database
      summary: Delete a Vitess database

  - target: $.paths['/organizations/{organization}/databases/{database}#vitess'].delete.parameters[?@.name == 'database']
    update:
      x-speakeasy-match: id
