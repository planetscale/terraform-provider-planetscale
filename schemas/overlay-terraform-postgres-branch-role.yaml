overlay: 1.1.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Terraform generation overlay for planetscale_role managed and data resources.
  version: 0.0.1
actions:
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post
    description: API operation for managed resource create.
    update:
      x-speakeasy-entity-operation: PostgresBranchRole#create
      x-speakeasy-entity-description: Manage a PlanetScale database role.
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].delete
    description: API operation for managed resource delete.
    update:
      x-speakeasy-entity-operation: PostgresBranchRole#delete
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].get
    description: API operation for data and managed resource read.
    update:
      x-speakeasy-entity-operation: PostgresBranchRole#read
      x-speakeasy-entity-description: Returns information about a PlanetScale database role.
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch
    description: API operation for managed resource update.
    update:
      x-speakeasy-entity-operation: PostgresBranchRole#update

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].get.responses["200"].content["application/json"].schema.properties
    description: Prevent type mismatch between request and response data. Mark sensitive property and ensure reads do not overwrite it.
    update:
      actor:
        x-speakeasy-name-override: actor_data
      branch:
        x-speakeasy-name-override: branch_data
      password:
        x-speakeasy-param-sensitive: true
        x-speakeasy-ignore: true

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch.responses["200"].content["application/json"].schema.properties
    description: Prevent type mismatch between request and response data. Mark sensitive property and ensure reads do not overwrite it.
    update:
      actor:
        x-speakeasy-name-override: actor_data
      branch:
        x-speakeasy-name-override: branch_data
      password:
        x-speakeasy-param-sensitive: true
        x-speakeasy-ignore: true

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.responses["200"].content["application/json"].schema.properties
    description: Prevent type mismatch between request and response data. Mark sensitive property.
    update:
      actor:
        x-speakeasy-name-override: actor_data
      branch:
        x-speakeasy-name-override: branch_data
      password:
        x-speakeasy-param-sensitive: true

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].get.responses["200"].content["application/json"].schema.properties.inherited_roles
    description: Mark inherited_roles as a set.
    update:
      format: set
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch.responses["200"].content["application/json"].schema.properties.inherited_roles
    description: Mark inherited_roles as a set.
    update:
      format: set
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.requestBody.content["application/json"].schema.properties.inherited_roles
    description: Mark inherited_roles as a set.
    update:
      format: set
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.responses["200"].content["application/json"].schema.properties.inherited_roles
    description: Mark inherited_roles as a set.
    update:
      format: set

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].get.responses["200"].content["application/json"].schema.properties.branch.properties.created_at
    description: Remove unnecessary timestamp from branch_data.
    update:
      x-speakeasy-ignore: true
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].get.responses["200"].content["application/json"].schema.properties.branch.properties.updated_at
    description: Remove unnecessary timestamp from branch_data.
    update:
      x-speakeasy-ignore: true

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch.responses["200"].content["application/json"].schema.properties.branch.properties.created_at
    description: Remove unnecessary timestamp from branch_data.
    update:
      x-speakeasy-ignore: true
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch.responses["200"].content["application/json"].schema.properties.branch.properties.updated_at
    description: Remove unnecessary timestamp from branch_data.
    update:
      x-speakeasy-ignore: true

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.responses["200"].content["application/json"].schema.properties.branch.properties.created_at
    description: Remove unnecessary timestamp from branch_data.
    update:
      x-speakeasy-ignore: true
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.responses["200"].content["application/json"].schema.properties.branch.properties.updated_at
    description: Remove unnecessary timestamp from branch_data.
    update:
      x-speakeasy-ignore: true

  # These need to map to the nested query_safety_settings block
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.requestBody.content['application/json'].schema.properties.require_where_on_delete
    remove: true
    # update:
    #   x-speakeasy-match: query_safety_settings.properties.require_where_on_delete
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch.requestBody.content['application/json'].schema.properties.require_where_on_delete
    remove: true
    # update:
    #   x-speakeasy-match: query_safety_settings.properties.require_where_on_delete
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles"].post.requestBody.content['application/json'].schema.properties.require_where_on_update
    remove: true
    # update:
    #   x-speakeasy-match: query_safety_settings.properties.require_where_on_update
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/roles/{id}"].patch.requestBody.content['application/json'].schema.properties.require_where_on_update
    remove: true
    # update:
    #   x-speakeasy-match: query_safety_settings.properties.require_where_on_update