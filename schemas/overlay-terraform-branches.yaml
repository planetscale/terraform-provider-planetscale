overlay: 1.1.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Terraform generation overlay for branch resources
  version: 0.0.1
actions:
  # Modifications
  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.parameters[?@.name == 'branch']
    description: Add x-speakeasy-match to branch parameter
    update:
      x-speakeasy-match: id

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].delete.parameters[?@.name == 'branch']
    description: Add x-speakeasy-match to branch parameter
    update:
      x-speakeasy-match: id

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.actor.properties.avatar_url
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.actor.properties.avatar_url
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.actor.properties.display_name
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.actor.properties.display_name
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.cluster_iops
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.cluster_iops
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.created_at
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.created_at
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.deleted_at
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.deleted_at
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.direct_vtgate
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.direct_vtgate
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.has_read_only_replicas
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.has_read_only_replicas
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.has_replicas
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.has_replicas
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.kind
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.kind
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.metal
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.metal
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.parent_branch
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.parent_branch
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.private_edge_connectivity
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.private_edge_connectivity
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.production
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.production
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region
    description: Add region_data name override
    update:
      x-speakeasy-name-override: region_data
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region
    description: Add region_data name override
    update:
      x-speakeasy-name-override: region_data

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.current_default
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.current_default
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.display_name
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.display_name
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.enabled
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.enabled
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.location
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.location
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.provider
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.provider
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.public_ip_addresses
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.public_ip_addresses
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.region.properties.slug
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.region.properties.slug
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.restore_checklist_completed_at
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.restore_checklist_completed_at
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.restored_from_branch
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.restored_from_branch
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.safe_migrations
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.safe_migrations
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.schema_last_updated_at
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.schema_last_updated_at
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.schema_ready
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.schema_ready
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.shard_count
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.shard_count
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.sharded
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.sharded
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.stale_schema
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.stale_schema
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.updated_at
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.updated_at
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.vtgate_count
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.vtgate_count
    remove: true

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}'].get.responses['200'].content['application/json'].schema.properties.vtgate_size
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches'].post.responses['201'].content['application/json'].schema.properties.vtgate_size
    remove: true

  # Copy and split out branch resources by kind
  - target: $.paths
    description: Add PostgresBranch path entries
    update:
      /organizations/{organization}/databases/{database}/branches#postgres: {}

  - target: $.paths['/organizations/{organization}/databases/{database}/branches#postgres']
    description: Copy branches path as base for postgres
    copy: $.paths['/organizations/{organization}/databases/{database}/branches']

  - target: $.paths
    update:
      /organizations/{organization}/databases/{database}/branches/{branch}#postgres: {}

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}#postgres']
    description: Copy branch path as base for postgres
    copy: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}']

  - target: $.paths['/organizations/{organization}/databases/{database}/branches#postgres'].get
    remove: true

  - target: $.paths
    description: Add VitessBranch path entries
    update:
      /organizations/{organization}/databases/{database}/branches#vitess: {}

  - target: $.paths['/organizations/{organization}/databases/{database}/branches#vitess']
    description: Copy branches path as base for vitess
    copy: $.paths['/organizations/{organization}/databases/{database}/branches']

  - target: $.paths
    update:
      /organizations/{organization}/databases/{database}/branches/{branch}#vitess: {}

  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}#vitess']
    description: Copy branch path as base for vitess
    copy: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}']

  - target: $.paths['/organizations/{organization}/databases/{database}/branches#vitess'].get
    remove: true

  # Remove copied base branches paths
  - target: $.paths['/organizations/{organization}/databases/{database}/branches']
    remove: true
  - target: $.paths['/organizations/{organization}/databases/{database}/branches/{branch}']
    remove: true