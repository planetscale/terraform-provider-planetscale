overlay: 1.0.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Terraform generation overlay for planetscale_password managed and data resources.
  version: 0.0.1
actions:
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords"].post
    description: API operation for managed resource create.
    update:
      x-speakeasy-entity-operation: Password#create
      x-speakeasy-entity-description: Manage a PlanetScale database branch password.
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords/{id}"].delete
    description: API operation for managed resource delete.
    update:
      x-speakeasy-entity-operation: Password#delete
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords/{id}"].get
    description: API operation for data and managed resource read.
    update:
      x-speakeasy-entity-operation: Password#read
      x-speakeasy-entity-description: Returns information about a PlanetScale database branch password.
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords/{id}"].patch
    description: API operation for managed resource update.
    update:
      x-speakeasy-entity-operation: Password#update

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords"].post.responses["201"].content["application/json"].schema.properties
    description: Mark sensitive property
    update:
      plain_text:
        x-speakeasy-param-sensitive: true

  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords/{id}"].get.responses["200"].content["application/json"].schema
    description: |-
      Ensure plain_text, which is only returned on create, is not overwritten on read.
      This removes the existing YAML anchor.
    remove: true
  - target: $.paths["/organizations/{organization}/databases/{database}/branches/{branch}/passwords/{id}"].get.responses["200"].content["application/json"]
    description: |-
      Ensure plain_text, which is only returned on create, is not overwritten on read.
      This copies the original OAS schema from the YAML anchor, while modifying plain_text
      to include x-speakeasy-ignore.

      Overlay "copy" action support is merged into the Overlay 1.1.0 specification,
      but that has not been finalized/released yet. Speakeasy will implement that
      Overlay feature ahead of time since its unlikely to change (much), however
      this is a temporary workaround since its not possible to write the YAML anchor
      syntax in this file directly (since its also YAML).
    update:
      schema:
        type: object
        properties:
          id:
            type: string
            description: The ID for the password
          name:
            type: string
            description: The display name for the password
          role:
            type: string
            enum:
              - reader
              - writer
              - admin
              - readwriter
            description: The role for the password
          cidrs:
            items:
              type: string
            type: array
            description: List of IP addresses or CIDR ranges that can use this password
          created_at:
            type: string
            description: When the password was created
          deleted_at:
            type: string
            description: When the password was deleted
          expires_at:
            type: string
            description: When the password will expire
          last_used_at:
            type: string
            description: When the password was last used to execute a query
          expired:
            type: boolean
            description: True if the credentials are expired
          direct_vtgate:
            type: boolean
            description: True if the credentials connect directly to a vtgate, bypassing load balancers
          ttl_seconds:
            type: integer
            description: Time to live (in seconds) for the password. The password will be invalid when TTL has passed
          access_host_url:
            type: string
            description: The host URL for the password
          access_host_regional_url:
            type: string
            description: The regional host URL
          access_host_regional_urls:
            items:
              type: string
            type: array
            description: The read-only replica host URLs
          actor:
            type: object
            properties:
              id:
                type: string
                description: The ID of the actor
              display_name:
                type: string
                description: The name of the actor
              avatar_url:
                type: string
                description: The URL of the actor's avatar
            additionalProperties: false
            required:
              - id
              - display_name
              - avatar_url
          region:
            type: object
            properties:
              id:
                type: string
                description: The ID of the region
              provider:
                type: string
                description: Provider for the region (ex. AWS)
              enabled:
                type: boolean
                description: Whether or not the region is currently active
              public_ip_addresses:
                items:
                  type: string
                type: array
                description: Public IP addresses for the region
              display_name:
                type: string
                description: Name of the region
              location:
                type: string
                description: Location of the region
              slug:
                type: string
                description: The slug of the region
              current_default:
                type: boolean
                description: True if the region is the default for new branch creation
            additionalProperties: false
            required:
              - id
              - provider
              - enabled
              - public_ip_addresses
              - display_name
              - location
              - slug
              - current_default
          username:
            type: string
            description: The username for the password
          plain_text:
            type: string
            description: The plain text password, available only after create
            x-speakeasy-param-sensitive: true
            x-speakeasy-ignore: true
          replica:
            type: boolean
            description: Whether or not the password is for a read replica
          renewable:
            type: boolean
            description: Whether or not the password can be renewed
          database_branch:
            type: object
            properties:
              name:
                type: string
                description: The name for the branch
              id:
                type: string
                description: The ID for the branch
              production:
                type: boolean
                description: Whether or not the branch is a production branch
              mysql_edge_address:
                type: string
                description: The address of the MySQL provider for the branch
              private_edge_connectivity:
                type: boolean
                description: True if private connectivity is enabled
            additionalProperties: false
            required:
              - name
              - id
              - production
              - mysql_edge_address
              - private_edge_connectivity
        additionalProperties: false
        required:
          - id
          - name
          - role
          - cidrs
          - created_at
          - deleted_at
          - expires_at
          - last_used_at
          - expired
          - direct_vtgate
          - ttl_seconds
          - access_host_url
          - access_host_regional_url
          - access_host_regional_urls
          - actor
          - region
          - username
          - plain_text
          - replica
          - renewable
          - database_branch
